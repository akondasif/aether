Aether disk search engine

1. Installing

Unpack language profiles (...).
Other software, like ebook-convert, pdftotext, djvutxt.
Run (after configuring) with mvn package, mvn jetty:run

2. Configuration
Configure aether.prop:

2.1 Mandatory configuration.
2.1.1 General
Which directories to include, and subdirectories to exclude.
dirlist=file:/home/dir/dir1,hdfs:/home/dir/dir2...
dirlistnot=/home/dir/dir1/tmp
Known uses are file, hdfs and none (defaulting to file).

Name of the node.
Nodename=...
(But if db is hibernate, it is localhost anyway).

How many to max reindex each turn, or 0 for no limit.
reindexlimit=10000

Don't try to index if failing this much
failedlimit=10

Number of seconds for Tika timeout
tikatimeout=600

Number of seconds for Other timeout
othertimeout=600

2.1.2 Database
Can be hbase, DataNucleus or Hibernate/H2.

2.1.2.1 Hibernate/H2
Hibernate/H2 elevant settings:
db=hibernate
h2dir=...

2.1.2.2 Hbase
Hbase relevant settings:
db=hbase
hbasequorum=localhost
hbaseport=2181
hbasemaster=localhost:2181

2.1.2.3 DataNucleus
DataNucleus elevant settings:
db=datanucleus
h2dir=...
mvn datanucleus:schema-create

2.1.3 Indexing/search:
Can be Lucene directly or Solr.

2.1.3.1 Lucene
Lucene relevant settings:
index=lucene
lucenepath=...
(Some code change will trigger Lucene index creation.)

2.1.3.2 Solr
Solr relevant settings:
index=solr
solrurl=http://localhost:8983/solr/mystuff

Solr server need new fields for schema.xml:
<field name="lang" type="text_general" indexed="true" stored="true"/>
<field name="metadata" type="text_general" indexed="true" stored="false"/>
and change for the following field:
<field name="content" type="text_general" indexed="false" stored="false" multiValued="true"/>

2.1.3.3 Langdetect
Download from https://code.google.com/p/language-detection/wiki/Downloads,
and put profiles* in the same dir as pom.xml.

2.2 Non-mandatory

2.2.1 General
Which type of file system
fs=local (default)

With fs=hadoop, also set
hdfsconffs=hadoop uri (sets fs.default.name)
Downside: can't download, can only use tika for conversion

Where to log
logdir=...

Whether to enable downloading
downloader=true

Whether to use authenication
authenticate=true

2.2.2 Classifying
There are two types, Mahout and OpenNLP

2.2.2.1 Mahout
Mahout relevant settings:
classify=mahout
mahoutalgorithm=bayes
mahaoutmodelpath=.../mahout/model
mahoutlabelindexfilepath=.../mahout/labelindex
mahoutdictionarypath=.../mahout/dataset-vectors/dictionary.file-0
mahoutdocumentfrequencypath=.../mahout/dataset-vectors/df-count/part-r-00000
(was: mahoutdocumentfrequencypath=.../mahout/dataset-vectors/frequency.file-0)
mahaoutconffs=hadoop uri (sets fs.default.name)

Training could be based on the Bayes part of 
examples/bin/classify-20newsgroups.sh in the Mahout distribution.

2.2.2.2 OpenNLP
OpenNLP relevant settings:
classify=opennlp
opennlpmodelpath=.../opennlp/en-doccat.bin

Training is standard, done with ./bin/opennlp DoccatTrainer in the
OpenNLP distribution.

3. GUI

3.1 Search
Use Lucene syntax
Searchable fields:
Id, lang, metadata, content (Lucene), text (Solr).

3.2 Control panel

Index filesystem new items
Button: Crawl the whole filesystem for new, and index.
Textfield: Use only the given path.
Filesystem index on changed md5 checks if md5 has changed, and reindexes.

Filesystem add new
Button: Add new files from the filesystem, but do not index.
Textfield: Use only the given path.

Index non-indexed items:
Button: Index all previously non-indexed (including failed).
Textfield: Use only the given path.
Index of suffix: Try to index all known items with suffix.

Reindex, textfield, use only the given path.
Reindex on before or after given date.

Consistency checks, with cleaning.
It lists files not currenly present in the filesystem (will be cleaned).
It also lists non-existing files (encoding problems) and new files.

Stats, listing non-indexed, memory usage or overlapping directories.

Database, get items related to md5 id.
Database search, fields indexed, convertsw, classification, failedreason, noindexreason, timeoutreason.

4. Caution
Multitasking issues, even for a single node.